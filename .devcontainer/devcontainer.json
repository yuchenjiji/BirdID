{
	"name": "BirdID Final Perfect Env",
	"image": "mcr.microsoft.com/devcontainers/base:ubuntu-22.04",
	"remoteUser": "root", 
	"features": {
		"ghcr.io/devcontainers/features/java:1": {
			"version": "21"
		},
		"ghcr.io/devcontainers/features/node:1": {
			"version": "25"
		}
	},
	"customizations": {
		"vscode": {
			"extensions": [
				"dart-code.flutter",
				"dart-code.dart-code",
				"GitHub.copilot",
				"GitHub.copilot-chat"
			]
		}
	},
	// 这是一个从零开始的全自动脚本，确保万无一失
	"postCreateCommand": "apt-get update && apt-get install -y git curl unzip libglu1-mesa && npm install -g @github/copilot && if [ ! -d '/opt/flutter' ]; then git clone https://github.com/flutter/flutter.git -b stable /opt/flutter; fi && mkdir -p /opt/android-sdk && curl -o /tmp/cmdline-tools.zip https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip && unzip /tmp/cmdline-tools.zip -d /opt/android-sdk/ && mv /opt/android-sdk/cmdline-tools /opt/android-sdk/latest && mv /opt/android-sdk/latest /opt/android-sdk/cmdline-tools && export ANDROID_HOME=/opt/android-sdk && export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/platform-tools && yes | /opt/android-sdk/cmdline-tools/latest/bin/sdkmanager --sdk_root=$ANDROID_HOME 'platforms;android-36' 'build-tools;28.0.3' 'platform-tools' && yes | /opt/android-sdk/cmdline-tools/latest/bin/sdkmanager --licenses && flutter config --android-sdk /opt/android-sdk && echo 'export ANDROID_HOME=/opt/android-sdk' >> /root/.bashrc && echo 'export PATH=$PATH:/opt/flutter/bin:$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/platform-tools' >> /root/.bashrc",
	"forwardPorts": [8080]
}
